<%#
name: Kickstart vda only -- no swap no home
snippet: false
model: Ptable
os_family: Redhat
organizations:
- LSST
locations:
- Summit_Servers
-%>
#Dynamic


BOOT_VG="centos_$(hostname -s)"

BOOT_DEV=vda

cat <<EOF > /tmp/diskpart.cfg
ignoredisk --only-use=${BOOT_DEV}
zerombr
clearpart --drives=${BOOT_DEV} --all --initlabel

part /boot     --size=1024 --asprimary --ondrive=${BOOT_DEV}
part /boot/efi --size=200  --asprimary --ondrive=${BOOT_DEV} --fstype=efi
part pv.boot   --size=1 --grow --ondisk=${BOOT_DEV}
volgroup ${BOOT_VG} pv.boot

logvol /               --vgname=${BOOT_VG} --size=1 --grow --name=root
EOF
